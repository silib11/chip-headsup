<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒãƒ¼ã‚«ãƒ¼ ãƒ˜ãƒƒã‚ºã‚¢ãƒƒãƒ— ãƒãƒƒãƒ—ç®¡ç†</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: sans-serif; padding: 20px; background: #1a1a1a; color: #fff; }
        .container { max-width: 800px; margin: 0 auto; }
        h1 { text-align: center; margin-bottom: 30px; }
        .setup, .game { background: #2a2a2a; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .input-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input { width: 100%; padding: 10px; font-size: 16px; border: 1px solid #444; background: #333; color: #fff; border-radius: 4px; }
        button { padding: 12px 24px; font-size: 16px; cursor: pointer; border: none; border-radius: 4px; margin: 5px; background: #4CAF50; color: #fff; }
        button:hover { opacity: 0.9; }
        button:disabled { background: #666; cursor: not-allowed; }
        .btn-secondary { background: #2196F3; }
        .btn-danger { background: #f44336; }
        .btn-warning { background: #ff9800; }
        .players { display: flex; gap: 20px; margin-bottom: 20px; }
        .player { flex: 1; background: #333; padding: 15px; border-radius: 8px; }
        .player h2 { margin-bottom: 10px; }
        .chips { font-size: 32px; font-weight: bold; color: #4CAF50; margin: 10px 0; }
        .phase { text-align: center; font-size: 24px; margin-bottom: 20px; color: #ff9800; }
        .actions { text-align: center; }
        .player-actions { margin-top: 15px; display: flex; flex-wrap: wrap; gap: 5px; }
        .player-actions button { padding: 8px 12px; font-size: 14px; flex: 1; min-width: 80px; }
        .player-actions input { padding: 8px; }
        .player.disabled { opacity: 0.5; pointer-events: none; }
        .bet-input { display: flex; gap: 10px; margin-bottom: 15px; }
        .bet-input input { flex: 1; }
        .blinds { background: #333; padding: 15px; border-radius: 8px; margin-bottom: 20px; }
        .blinds-display { display: flex; gap: 20px; align-items: center; }
        .pot { text-align: center; font-size: 28px; margin-bottom: 20px; background: #333; padding: 15px; border-radius: 8px; }
        .hidden { display: none; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸƒ ãƒãƒ¼ã‚«ãƒ¼ ãƒ˜ãƒƒã‚ºã‚¢ãƒƒãƒ— ãƒãƒƒãƒ—ç®¡ç†</h1>
        
        <div id="setup" class="setup">
            <h2>ã‚²ãƒ¼ãƒ è¨­å®š</h2>
            <div class="input-group">
                <label>ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼A ãƒãƒƒãƒ—æ•°</label>
                <input type="number" id="chipsA" value="1000">
            </div>
            <div class="input-group">
                <label>ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼B ãƒãƒƒãƒ—æ•°</label>
                <input type="number" id="chipsB" value="1000">
            </div>
            <div class="input-group">
                <label>ã‚¹ãƒ¢ãƒ¼ãƒ«ãƒ–ãƒ©ã‚¤ãƒ³ãƒ‰ (SB)</label>
                <input type="number" id="sb" value="5">
            </div>
            <div class="input-group">
                <label>ãƒ“ãƒƒã‚°ãƒ–ãƒ©ã‚¤ãƒ³ãƒ‰ (BB)</label>
                <input type="number" id="bb" value="10">
            </div>
            <div class="input-group">
                <label>BBã‚¢ãƒ³ãƒ†ã‚£</label>
                <input type="number" id="ante" value="0">
            </div>
            <button onclick="startGame()">ã‚²ãƒ¼ãƒ é–‹å§‹</button>
        </div>

        <div id="game" class="game hidden">
            <div class="blinds">
                <div class="blinds-display">
                    <div>SB: <span id="sbDisplay"></span></div>
                    <div>BB: <span id="bbDisplay"></span></div>
                    <div>ã‚¢ãƒ³ãƒ†ã‚£: <span id="anteDisplay"></span></div>
                    <button class="btn-secondary" onclick="changeBlinds()">ãƒ–ãƒ©ã‚¤ãƒ³ãƒ‰å¤‰æ›´</button>
                </div>
            </div>

            <div class="pot">
                ãƒãƒƒãƒˆ: <span id="pot">0</span>
            </div>

            <div class="phase" id="phase">ãƒ—ãƒªãƒ•ãƒ­ãƒƒãƒ—</div>

            <div class="players">
                <div class="player" id="playerA">
                    <h2>ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼A <span id="posA"></span></h2>
                    <div class="chips" id="chipsDisplayA">1000</div>
                    <div>ãƒ™ãƒƒãƒˆ: <span id="betA">0</span></div>
                    <div class="player-actions">
                        <input type="number" id="betAmountA" placeholder="é¡" style="width: 80px;">
                        <button onclick="action('A', 'fold')" class="btn-danger">ãƒ•ã‚©ãƒ¼ãƒ«ãƒ‰</button>
                        <button onclick="action('A', 'check')">ãƒã‚§ãƒƒã‚¯</button>
                        <button onclick="action('A', 'bet')">ãƒ™ãƒƒãƒˆ</button>
                        <button onclick="action('A', 'raise')">ãƒ¬ã‚¤ã‚º</button>
                        <button onclick="action('A', 'allin')" class="btn-warning">ã‚ªãƒ¼ãƒ«ã‚¤ãƒ³</button>
                    </div>
                </div>
                <div class="player" id="playerB">
                    <h2>ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼B <span id="posB"></span></h2>
                    <div class="chips" id="chipsDisplayB">1000</div>
                    <div>ãƒ™ãƒƒãƒˆ: <span id="betB">0</span></div>
                    <div class="player-actions">
                        <input type="number" id="betAmountB" placeholder="é¡" style="width: 80px;">
                        <button onclick="action('B', 'fold')" class="btn-danger">ãƒ•ã‚©ãƒ¼ãƒ«ãƒ‰</button>
                        <button onclick="action('B', 'check')">ãƒã‚§ãƒƒã‚¯</button>
                        <button onclick="action('B', 'bet')">ãƒ™ãƒƒãƒˆ</button>
                        <button onclick="action('B', 'raise')">ãƒ¬ã‚¤ã‚º</button>
                        <button onclick="action('B', 'allin')" class="btn-warning">ã‚ªãƒ¼ãƒ«ã‚¤ãƒ³</button>
                    </div>
                </div>
            </div>

            <div class="actions">
                <button class="btn-secondary" id="nextPhaseBtn" onclick="nextPhase()" disabled>æ¬¡ã®ãƒ•ã‚§ãƒ¼ã‚º</button>
                <button class="btn-warning" id="showdownBtn" onclick="showdown()" style="display:none;">ã‚·ãƒ§ã‚¦ãƒ€ã‚¦ãƒ³</button>
                <button onclick="newHand()">æ–°ã—ã„ãƒãƒ³ãƒ‰</button>
            </div>
        </div>
    </div>

    <script>
        let state = {
            chipsA: 0, chipsB: 0, sb: 0, bb: 0, ante: 0,
            betA: 0, betB: 0, pot: 0,
            phase: 0, btnPlayer: 'A',
            allIn: false, currentPlayer: 'A',
            actionTaken: { A: false, B: false }
        };

        function startGame() {
            state.chipsA = parseInt(document.getElementById('chipsA').value);
            state.chipsB = parseInt(document.getElementById('chipsB').value);
            state.sb = parseInt(document.getElementById('sb').value);
            state.bb = parseInt(document.getElementById('bb').value);
            state.ante = parseInt(document.getElementById('ante').value);
            
            document.getElementById('setup').classList.add('hidden');
            document.getElementById('game').classList.remove('hidden');
            
            updateDisplay();
            newHand();
        }

        function newHand() {
            state.betA = 0;
            state.betB = 0;
            state.pot = 0;
            state.phase = 0;
            state.allIn = false;
            state.actionTaken = { A: false, B: false };
            state.btnPlayer = state.btnPlayer === 'A' ? 'B' : 'A';
            
            // ãƒ–ãƒ©ã‚¤ãƒ³ãƒ‰å¾´å
            if (state.btnPlayer === 'A') {
                state.chipsA -= state.sb;
                state.betA = state.sb;
                state.chipsB -= state.bb + state.ante;
                state.betB = state.bb;
                state.pot = state.ante;
                state.currentPlayer = 'A'; // BTN/SBãŒå…ˆ
            } else {
                state.chipsB -= state.sb;
                state.betB = state.sb;
                state.chipsA -= state.bb + state.ante;
                state.betA = state.bb;
                state.pot = state.ante;
                state.currentPlayer = 'B'; // BTN/SBãŒå…ˆ
            }
            state.pot += state.sb + state.bb;
            
            updateDisplay();
        }

        function action(player, type) {
            if (player !== state.currentPlayer) return;
            
            const inputId = 'betAmount' + player;
            const amount = parseInt(document.getElementById(inputId).value) || 0;
            const chips = player === 'A' ? state.chipsA : state.chipsB;
            const bet = player === 'A' ? state.betA : state.betB;
            const opponentBet = player === 'A' ? state.betB : state.betA;
            
            if (type === 'fold') {
                fold(player);
                return;
            }
            
            if (type === 'check') {
                if (bet < opponentBet) return; // ãƒã‚§ãƒƒã‚¯ã§ããªã„
                state.actionTaken[player] = true;
            } else if (type === 'bet') {
                if (amount <= 0 || opponentBet > 0) return;
                const actualBet = Math.min(amount, chips);
                if (player === 'A') {
                    state.chipsA -= actualBet;
                    state.betA += actualBet;
                    if (state.chipsA === 0) state.allIn = true;
                } else {
                    state.chipsB -= actualBet;
                    state.betB += actualBet;
                    if (state.chipsB === 0) state.allIn = true;
                }
                state.actionTaken[player] = true;
                state.actionTaken[player === 'A' ? 'B' : 'A'] = false;
            } else if (type === 'raise') {
                if (amount <= 0 || bet >= opponentBet) return;
                const toCall = opponentBet - bet;
                const actualBet = Math.min(amount, chips);
                if (actualBet <= toCall) return;
                if (player === 'A') {
                    state.chipsA -= actualBet;
                    state.betA += actualBet;
                    if (state.chipsA === 0) state.allIn = true;
                } else {
                    state.chipsB -= actualBet;
                    state.betB += actualBet;
                    if (state.chipsB === 0) state.allIn = true;
                }
                state.actionTaken[player] = true;
                state.actionTaken[player === 'A' ? 'B' : 'A'] = false;
            } else if (type === 'allin') {
                if (player === 'A') {
                    state.betA += state.chipsA;
                    state.chipsA = 0;
                } else {
                    state.betB += state.chipsB;
                    state.chipsB = 0;
                }
                state.allIn = true;
                state.actionTaken[player] = true;
            }
            
            document.getElementById(inputId).value = '';
            state.currentPlayer = player === 'A' ? 'B' : 'A';
            updateDisplay();
        }

        function nextPhase() {
            state.pot += state.betA + state.betB;
            state.betA = 0;
            state.betB = 0;
            state.phase++;
            state.actionTaken = { A: false, B: false };
            state.currentPlayer = state.btnPlayer === 'A' ? 'B' : 'A'; // BBãŒå…ˆ
            
            if (state.phase > 3) {
                showdown();
                return;
            }
            
            updateDisplay();
        }

        function showdown() {
            const winner = prompt('å‹è€…ã‚’å…¥åŠ› (A ã¾ãŸã¯ B):');
            if (winner === 'A' || winner === 'a') {
                state.chipsA += state.pot + state.betA + state.betB;
            } else if (winner === 'B' || winner === 'b') {
                state.chipsB += state.pot + state.betA + state.betB;
            }
            newHand();
        }

        function fold(player) {
            if (player === 'A') {
                state.chipsB += state.pot + state.betA + state.betB;
            } else {
                state.chipsA += state.pot + state.betA + state.betB;
            }
            newHand();
        }

        function changeBlinds() {
            const newSB = parseInt(prompt('æ–°ã—ã„SB:', state.sb));
            const newBB = parseInt(prompt('æ–°ã—ã„BB:', state.bb));
            const newAnte = parseInt(prompt('æ–°ã—ã„ã‚¢ãƒ³ãƒ†ã‚£:', state.ante));
            if (newSB && newBB && newAnte >= 0) {
                state.sb = newSB;
                state.bb = newBB;
                state.ante = newAnte;
                updateDisplay();
            }
        }

        function updateDisplay() {
            const phases = ['ãƒ—ãƒªãƒ•ãƒ­ãƒƒãƒ—', 'ãƒ•ãƒ­ãƒƒãƒ—', 'ã‚¿ãƒ¼ãƒ³', 'ãƒªãƒãƒ¼'];
            document.getElementById('phase').textContent = phases[state.phase];
            document.getElementById('chipsDisplayA').textContent = state.chipsA;
            document.getElementById('chipsDisplayB').textContent = state.chipsB;
            document.getElementById('betA').textContent = state.betA;
            document.getElementById('betB').textContent = state.betB;
            document.getElementById('pot').textContent = state.pot;
            document.getElementById('sbDisplay').textContent = state.sb;
            document.getElementById('bbDisplay').textContent = state.bb;
            document.getElementById('anteDisplay').textContent = state.ante;
            
            document.getElementById('posA').textContent = state.btnPlayer === 'A' ? '(BTN/SB)' : '(BB)';
            document.getElementById('posB').textContent = state.btnPlayer === 'B' ? '(BTN/SB)' : '(BB)';
            
            // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®æœ‰åŠ¹åŒ–/ç„¡åŠ¹åŒ–
            document.getElementById('playerA').classList.toggle('disabled', state.currentPlayer !== 'A');
            document.getElementById('playerB').classList.toggle('disabled', state.currentPlayer !== 'B');
            
            // æ¬¡ã®ãƒ•ã‚§ãƒ¼ã‚ºãƒœã‚¿ãƒ³ã®æœ‰åŠ¹åŒ–
            const betsEqual = state.betA === state.betB;
            const bothActed = state.actionTaken.A && state.actionTaken.B;
            document.getElementById('nextPhaseBtn').disabled = !(betsEqual && bothActed);
            
            // ã‚·ãƒ§ã‚¦ãƒ€ã‚¦ãƒ³ãƒœã‚¿ãƒ³ã®è¡¨ç¤º
            const showShowdown = state.allIn && betsEqual && (state.chipsA === 0 || state.chipsB === 0);
            document.getElementById('showdownBtn').style.display = showShowdown ? 'inline-block' : 'none';
        }
    </script>
</body>
</html>
